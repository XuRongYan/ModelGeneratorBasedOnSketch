cmake_minimum_required(VERSION 3.14)
project(ModelGeneratorBasedOnSketch)

find_package(pmp)
find_package(OpenCV REQUIRED)
set(CMAKE_CXX_STANDARD 14)
set(GLEW_H /usr/local/include/GL)
set(GLFW_H /usr/local/include/GLFW)
set(IMGUI_H /usr/local/include/imgui)
set(STB_H /usr/local/include/stb)
set(GTEST_H /usr/local/include/gtest)
set(OPENCV_H /usr/local/include/opencv4)
include_directories(${GLEW_H} ${GLFW_H} ${STB_H} ${IMGUI_H} ${OPENCV_H} ${GTEST_h})
include_directories(/usr/local/include)
include_directories(pmp)
include_directories(/usr/local/include/eigen3)
link_libraries(/usr/local/lib/libpmp_vis.a)
link_libraries(/usr/local/lib/libgtest.a)
link_libraries(/usr/local/lib/libstb_image.a)
link_libraries(/usr/local/lib/libimgui.a)
set(GLEW_LINK /usr/local/lib/libGLEW.2.1.dylib)
set(GLFW_LINK /usr/local/lib/libglfw.3.dylib)
link_libraries(${OPENGL} ${GLEW_LINK} ${GLFW_LINK})
add_executable(ModelGeneratorBasedOnSketch main.cpp test/LaplacianTest.cpp utils/log_utils/Debug.cpp utils/log_utils/Debug.h utils/log_utils/Logger.cpp utils/log_utils/Logger.h utils/log_utils/LogContext.h laplace/Laplacian.h laplace/LaplacianFactory.cpp laplace/LaplacianFactory.h laplace/LaplaceWeight.h laplace/UniformWeight.h laplace/CotWeight.h laplace/MVCWeight.h utils/PmpUtils.h utils/PmpException.h test/LaplaceWeightTest.cpp test/LaplaceMatrixTest.cpp io/MeshIO.cpp io/MeshIO.h contour/ContourBaseStrategy.h contour/Contour.h contour/ContourCollection.h test/ContourTest.cpp contour/ContourLoader.h contour/ContourImageStrategy.h utils/EigenUtils.h contour/ContourFactory.h optimizer/BaseOptimizer.h optimizer/LdltOptimizer.h optimizer/LLTOptimizer.h test/OptimizerTest.cpp spherical_harmonic/SphericalCoordinate.h test/SphericalCoordinateTest.cpp spherical_harmonic/MeshSphericalCoordinate.h spherical_harmonic/ContourSphericalCoordinate.h spherical_harmonic/SphericalHarmonics.h test/SphericalHarmonicTest.cpp triangulation/triangle.c triangulation/triangle.h triangulation/triangulation.cpp triangulation/triangulation.h triangulation/TriangulationUtil.h test/TriangulationUtilTest.cpp triangulation/TriangulationUtil.cpp ModelFactory.h spherical_harmonic/TriangulationSpericalCoordinate.h optimizer/SVDOptimizer.h optimizer/LuOptimizer.h Parameterization.h laplace/LaplaceWithBoundary.h test/ParameterizationTest.cpp test/PmpUtilTest.cpp)
target_link_libraries(ModelGeneratorBasedOnSketch /usr/local/lib/libpmp.dylib)
target_link_libraries(ModelGeneratorBasedOnSketch pmp)
target_link_libraries(ModelGeneratorBasedOnSketch ${OpenCV_LIBS} )
if (APPLE)
    target_link_libraries(ModelGeneratorBasedOnSketch "-framework OpenGL")
    target_link_libraries(ModelGeneratorBasedOnSketch "-framework GLUT")
endif()
